definitions:
  dto.ContactDto:
    properties:
      link:
        type: string
      name:
        type: string
    type: object
  dto.GroupDto:
    properties:
      categories:
        items:
          type: string
        type: array
      city:
        type: string
      contacts:
        items:
          $ref: '#/definitions/dto.ContactDto'
        type: array
      createdAt:
        type: string
      creatorId:
        type: integer
      creatorName:
        type: string
      creatorUsername:
        type: string
      description:
        type: string
      id:
        type: integer
      image:
        type: string
      isPrivate:
        type: boolean
      memberCount:
        type: integer
      nameGroup:
        type: string
      smallDescription:
        type: string
      updatedAt:
        type: string
    type: object
  group.CreateGroupInput:
    type: object
  handlers.AuthResponse:
    properties:
      access_token:
        type: string
      admin_groups:
        items:
          $ref: '#/definitions/services.AdminGroupResponse'
        type: array
      refresh_token:
        type: string
    type: object
  handlers.RefreshRequest:
    properties:
      refresh_token:
        type: string
    required:
    - refresh_token
    type: object
  handlers.SessionEmailInput:
    properties:
      email:
        type: string
      type_ses:
        type: string
    required:
    - email
    - type_ses
    type: object
  handlers.UserRequest:
    properties:
      email:
        type: string
      password:
        type: string
    required:
    - email
    - password
    type: object
  models.SessionRegResponse:
    properties:
      session_id:
        type: string
    type: object
  models.User:
    properties:
      createdAt:
        type: string
      email:
        type: string
      enterprise:
        type: boolean
      id:
        type: integer
      image:
        type: string
      name:
        type: string
      password:
        type: string
      role:
        type: string
      status:
        type: string
      telegramID:
        type: string
      updatedAt:
        type: string
      us:
        description: Salt         string `gorm:"not null" validate:"required"`
        type: string
      verifiedUser:
        type: boolean
    required:
    - email
    - name
    - password
    - us
    type: object
  news.Comments:
    properties:
      created_at:
        type: string
      id:
        type: integer
      news_id:
        type: integer
      text:
        type: string
      updated_at:
        type: string
      user:
        $ref: '#/definitions/models.User'
      user_id:
        type: integer
    type: object
  news.ContentNews:
    properties:
      id:
        type: integer
      news_id:
        type: integer
      text:
        type: string
    required:
    - text
    type: object
  news.News:
    properties:
      comments:
        items:
          $ref: '#/definitions/news.Comments'
        type: array
      content:
        items:
          $ref: '#/definitions/news.ContentNews'
        type: array
      created_time:
        type: string
      createdAt:
        type: string
      description:
        type: string
      id:
        type: integer
      image:
        type: string
      title:
        type: string
      updatedAt:
        type: string
    required:
    - description
    - image
    - title
    type: object
  register.ChangePasswordInput:
    properties:
      email:
        type: string
      new_password:
        type: string
      session_id:
        type: string
    required:
    - email
    - new_password
    - session_id
    type: object
  register.CreateUserInput:
    properties:
      email:
        type: string
      name:
        maxLength: 40
        minLength: 5
        type: string
      password:
        type: string
      session_id:
        type: string
    required:
    - email
    - name
    - password
    - session_id
    type: object
  register.VerifySessionInput:
    properties:
      code:
        type: string
      session_id:
        type: string
      type:
        type: string
    required:
    - code
    - session_id
    - type
    type: object
  services.AdminGroupResponse:
    properties:
      category:
        items:
          type: string
        type: array
      id:
        type: integer
      image:
        type: string
      member_count:
        type: integer
      name:
        type: string
      small_description:
        type: string
      type:
        type: string
    type: object
  services.CommentDTO:
    properties:
      created_time:
        type: string
      id:
        type: integer
      image:
        type: string
      name:
        type: string
      text:
        type: string
      user_id:
        type: integer
    type: object
  services.ConfirmResetPasswordInput:
    properties:
      email:
        type: string
      password:
        type: string
      session_id:
        type: string
    required:
    - email
    - password
    - session_id
    type: object
  services.CreateCommentInput:
    properties:
      text:
        type: string
    required:
    - text
    type: object
  services.CreateNewsInput:
    properties:
      description:
        type: string
      image:
        type: string
      text:
        type: string
      title:
        type: string
    required:
    - description
    - image
    - text
    - title
    type: object
  services.GetGroups:
    properties:
      category:
        items:
          type: string
        type: array
      count:
        type: integer
      createdAt:
        type: string
      description:
        type: string
      id:
        type: integer
      image:
        type: string
      isPrivate:
        type: boolean
      name:
        type: string
    type: object
  services.GetGroupsResponse:
    properties:
      groups:
        items:
          $ref: '#/definitions/services.GetGroups'
        type: array
      has_more:
        type: boolean
      page:
        type: integer
      total:
        type: integer
    type: object
  services.GetUsers:
    properties:
      id:
        type: integer
      image:
        type: string
      name:
        type: string
      status:
        type: string
      us:
        type: string
    type: object
  services.GetUsersResponse:
    properties:
      has_more:
        type: boolean
      page:
        type: integer
      total:
        type: integer
      users:
        items:
          $ref: '#/definitions/services.GetUsers'
        type: array
    type: object
  services.NewsDTO:
    properties:
      comments:
        items:
          $ref: '#/definitions/services.CommentDTO'
        type: array
      content:
        type: string
      created_time:
        type: string
      description:
        type: string
      id:
        type: integer
      image:
        type: string
      title:
        type: string
    type: object
  services.NewsPage:
    properties:
      hasMore:
        type: boolean
      items:
        items:
          $ref: '#/definitions/news.News'
        type: array
      page:
        type: integer
      total:
        type: integer
    type: object
  services.ResetPasswordRequest:
    properties:
      email:
        type: string
    required:
    - email
    type: object
info:
  contact: {}
paths:
  /api/groups/search:
    get:
      consumes:
      - application/json
      description: Поиск групп по названию, категориям и с сортировкой (с пагинацией).
      parameters:
      - description: Название группы для поиска
        in: query
        name: name
        type: string
      - description: Фильтр по категории
        in: query
        name: category
        type: string
      - description: 'Поле сортировки: members (по числу участников), date (по дате
          регистрации), category (по имени категории)'
        in: query
        name: sort_by
        type: string
      - default: desc
        description: 'Порядок сортировки: asc или desc'
        in: query
        name: order
        type: string
      - default: 1
        description: Номер страницы (>=1)
        in: query
        name: page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Успешный поиск
          schema:
            $ref: '#/definitions/services.GetGroupsResponse'
        "400":
          description: Некорректный номер страницы
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Пользователь не авторизован
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Внутренняя ошибка сервера
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Поиск групп
      tags:
      - search
  /api/news:
    get:
      description: Возвращает постраничный список новостей, отсортированных по дате
        создания.
      parameters:
      - default: 1
        description: Номер страницы
        in: query
        name: page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Постраничный список новостей
          schema:
            $ref: '#/definitions/services.NewsPage'
        "500":
          description: Внутренняя ошибка сервера
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Получить список новостей
      tags:
      - News
    post:
      consumes:
      - application/json
      description: Создает новую новость вместе с текстом. Доступно только администраторам.
      parameters:
      - description: Данные для создания новости
        in: body
        name: news
        required: true
        schema:
          $ref: '#/definitions/services.CreateNewsInput'
      produces:
      - application/json
      responses:
        "201":
          description: Новость успешно создана
          schema:
            $ref: '#/definitions/news.News'
        "400":
          description: Некорректные данные или ошибка валидации
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Пользователь не авторизован или не является администратором
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Создание новости
      tags:
      - News
  /api/news/{id}:
    get:
      consumes:
      - application/json
      description: Возвращает новость по ID с текстом и комментариями (с ником и картинкой
        юзера)
      parameters:
      - description: ID новости
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Новость с текстом и комментариями
          schema:
            $ref: '#/definitions/services.NewsDTO'
        "404":
          description: Новость не найдена
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Получение новости
      tags:
      - News
  /api/news/{id}/comments:
    post:
      consumes:
      - application/json
      description: Создаёт комментарий для новости (только авторизованные пользователи)
      parameters:
      - description: ID новости
        in: path
        name: id
        required: true
        type: integer
      - description: Комментарий
        in: body
        name: comment
        required: true
        schema:
          $ref: '#/definitions/services.CreateCommentInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/news.Comments'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Добавить комментарий
      tags:
      - News
  /api/news/{newsId}/comments/{commentId}:
    delete:
      consumes:
      - application/json
      description: Удаляет комментарий (только для администраторов)
      parameters:
      - description: ID новости
        in: path
        name: newsId
        required: true
        type: integer
      - description: ID комментария
        in: path
        name: commentId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Удалить комментарий
      tags:
      - Comments
  /api/users/confirm-reset:
    post:
      consumes:
      - application/json
      description: Пользователь вводит session_id, код из email и новый пароль. При
        успешной верификации пароль меняется.
      parameters:
      - description: Данные для подтверждения и новый пароль
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/services.ConfirmResetPasswordInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Сброс пароля
      tags:
      - auth
  /api/users/delete:
    delete:
      description: Позволяет текущему авторизованному пользователю удалить свой аккаунт.
        Это действие необратимо.
      produces:
      - application/json
      responses:
        "200":
          description: Аккаунт успешно удалён
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Ошибка (например, пользователь не найден)
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Пользователь не авторизован
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Удаление аккаунта пользователя
      tags:
      - Users inf
  /api/users/request-reset:
    post:
      consumes:
      - application/json
      description: Пользователь указывает email, на него отправляется код подтверждения
        для смены пароля.
      parameters:
      - description: Email пользователя
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/services.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SessionRegResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Запрос на сброс пароля
      tags:
      - auth
  /api/users/search:
    get:
      consumes:
      - application/json
      description: Поиск пользователей по имени с пагинацией.
      parameters:
      - description: Имя для поиска
        in: query
        name: name
        type: string
      - default: 1
        description: Номер страницы
        in: query
        name: page
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Успешный поиск
          schema:
            $ref: '#/definitions/services.GetUsersResponse'
        "400":
          description: Некорректный номер страницы
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Пользователь не авторизован
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Внутренняя ошибка сервера
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Поиск пользователей
      tags:
      - search
  /api/v2/auth/login:
    post:
      consumes:
      - application/json
      description: Проверяет email и пароль, возвращает access и refresh токены
      parameters:
      - description: Данные пользователя
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/handlers.UserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Токены успешно созданы
          schema:
            $ref: '#/definitions/handlers.AuthResponse'
        "400":
          description: Некорректный JSON или параметры
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Неверный пароль
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Пользователь не найден
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ошибка сервера
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Аутентификация пользователя
      tags:
      - auth
  /api/v2/auth/refresh:
    get:
      consumes:
      - application/json
      description: Проверяет email и пароль, возвращает access и refresh токены
      parameters:
      - description: Данные пользователя
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/handlers.RefreshRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Токены успешно созданы
          schema:
            $ref: '#/definitions/handlers.AuthResponse'
        "400":
          description: Некорректный JSON или параметры
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Неверный пароль
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Пользователь не найден
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Ошибка сервера
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Аутентификация пользователя
      tags:
      - auth
  /api/v2/groups/create:
    post:
      consumes:
      - application/json
      description: Создает новую группу. Контакты передаются строкой в формате "название:ссылка,
        название:ссылка"
      parameters:
      - description: Данные для создания группы
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/group.CreateGroupInput'
      produces:
      - application/json
      responses:
        "201":
          description: Группа успешно создана
          schema:
            $ref: '#/definitions/dto.GroupDto'
        "400":
          description: Некорректные данные
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Не авторизован
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Внутренняя ошибка сервера
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Создание группы
      tags:
      - groups_admin
  /api/v2/register/:
    post:
      consumes:
      - application/json
      description: Регистрирует нового пользователя по данным из запроса
      parameters:
      - description: Данные для создания пользователя
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/register.CreateUserInput'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "409":
          description: Conflict
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Создать пользователя
      tags:
      - users
  /api/v2/register/password/change:
    post:
      consumes:
      - application/json
      description: Изменяет пароль пользователя после подтверждения сессии восстановления
      parameters:
      - description: Данные для смены пароля
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/register.ChangePasswordInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Изменить пароль
      tags:
      - users
  /api/v2/register/session/register:
    post:
      consumes:
      - application/json
      description: Создает сессию для подтверждения email пользователя при регистрации
      parameters:
      - description: Email пользователя
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/handlers.SessionEmailInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.SessionRegResponse'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Создать сессию регистрации
      tags:
      - sessions
  /api/v2/register/session/verify:
    patch:
      consumes:
      - application/json
      description: Проверяет код сессии, отправленный на email
      parameters:
      - description: Данные сессии для проверки
        in: body
        name: input
        required: true
        schema:
          $ref: '#/definitions/register.VerifySessionInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: boolean
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
        "429":
          description: Too Many Requests
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Проверить сессию
      tags:
      - sessions
  /api/v2/sub/UploadImg:
    post:
      consumes:
      - multipart/form-data
      description: Загружает фотографию в хранилище и возвращает URL. Этот URL затем
        можно использовать для создания или обновления данных сущности (например,
        группы).
      parameters:
      - description: Изображение для загрузки (JPG, PNG, максимум 10MB)
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: URL загруженного изображения
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Файл не предоставлен, имеет неверный тип или размер
          schema:
            additionalProperties:
              type: string
            type: object
        "401":
          description: Пользователь не авторизован
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Внутренняя ошибка сервера
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: Загрузка фотографии
      tags:
      - groups_admin
securityDefinitions:
  BearerAuth:
    description: 'Введите токен в формате: Bearer <your_token>'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
